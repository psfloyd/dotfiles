#!/bin/bash

# Vars{{{

dateVar=$(date +%F)
timeVar=$(date +%T)

logPath="$HOME/Other/.log/grive-loop-log/"
targetDir="$HOME/Documents/Google Drive"

logsToKeep=15

#}}}


[ ! -d $logPath ] && mkdir -p $logPath

cd "$targetDir"
targetName=$(echo "$targetDir" | awk -F / '{ print $NF }')

grive -P -l "$logPath"/"$targetName"'_'"$dateVar"'_'"$timeVar"".log"
        
if [ $(ls $logPath/ | wc -l) -gt $logsToKeep ]; then 
    rm $logPath$(ls $logPath -t | tail -1) # Borro el archivo mas viejo
fi
